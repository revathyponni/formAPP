<div class="container mt-3">
  @for (item of formService.rows(); track item.id) {
  <div
    cdkDropList
    [cdkDropListData]="item.id"
    (cdkDropListDropped)="onDrop($event, item.id)"
    [cdkDropListConnectedTo]="['field-selector']"
    [cdkDropListOrientation]="'mixed'"
    class="mb-3"
  >
    <div class="d-flex justify-content-between align-items-center mb-2">
      <div class="mb-2">Row</div>
      <div>
        @if(isAdmin()) {
        <button
          class="btn btn-outline-danger btn-sm"
          (click)="formService.deleteRow(item.id)"
          [hidden]="formService.rows().length === 1"
        >
          <i class="bi bi-trash"></i>
        </button>
        }
      </div>
    </div>
    <div class="row">
      @for (items of item.fields; track items.id) {
      <div
        cdkDrag
        [cdkDragData]="items"
        class="col"
        [ngClass]="{
          'col-12': item.fields.length === 1,
          'col-6': item.fields.length === 2,
          'col-4': item.fields.length === 3
        }"
      >
        <app-form-field [field]="items"></app-form-field>
      </div>
      }@empty {
      <div class="col text-center">Drag and drop fields here</div>
      }
    </div>
  </div>
  }
</div>
